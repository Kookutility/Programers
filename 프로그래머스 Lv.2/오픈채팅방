import re
def solution(record):
    answer = []
    pattern = re.compile(r'\buid\d+\b') # uid 조사
    uid = [pattern.findall(i)[0] for i in record]
    uid = {key : 0 for key in uid} # uid값 딕셔너리로
    record = [word for i in record for word in i.split(' ')]
    for i in uid.keys():
        name_idx = record[::-1].index(i) - 1
        current_name = record[::-1][name_idx]
        uid[i] = current_name #최근 uid의 닉네임을 현재 uid로 설정
    for i in range(len(record)):
        if record[i] == 'Enter':
            answer.append(uid[record[i+1]]+"님이 들어왔습니다.")
        elif record[i] == 'Leave':
            answer.append(uid[record[i+1]]+"님이 나갔습니다.")
    return answer
